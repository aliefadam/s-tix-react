import{j as e,W as v,r as d,q as w}from"./app-CTfkJgiO.js";import{B as N}from"./BreadCrumb-DewxCMSZ.js";import{E as k}from"./EventDetailPanel-Bg_DV39l.js";import{U as D}from"./UserLayout-B2VJDLBl.js";import{g as c}from"./getDistance-Dm5tcyCK.js";import{N as u}from"./notification-D8nuFN0y.js";import{t as P}from"./timeToSeconds-hLgWVabV.js";function C({name:r,img:t,setData:a}){return e.jsxs("div",{className:"flex items-center ps-4 border border-gray-200 rounded dark:border-gray-700",children:[e.jsx("input",{id:r,type:"radio",defaultValue:r,name:"pembayaran",onChange:s=>a("payment_method",s.target.value),className:"w-4 h-4 text-teal-600 bg-gray-100 border-gray-300 focus:ring-teal-500 dark:focus:ring-teal-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"}),e.jsxs("label",{htmlFor:r,className:"w-full py-4 ms-2 text-sm font-medium text-gray-900 dark:text-gray-300 flex items-center gap-2",children:[e.jsx("img",{src:t,className:"w-[50px] border p-2",alt:""}),r]})]})}function x({type:r,methods:t,setData:a}){return e.jsxs("div",{className:"border border-teal-700 text-white rounded-md shadow-md overflow-hidden",children:[e.jsx("div",{className:"p-5 bg-gradient-to-r from-teal-400 to-teal-500",children:e.jsx("span",{className:"text-center block",children:r})}),e.jsx("div",{className:"p-5 flex flex-col gap-4",children:e.jsx("div",{className:"grid grid-cols-2 gap-4",children:t.map((s,i)=>e.jsx(C,{name:s.name,img:s.image,setData:a},i))})})]})}function A({title:r,event:t,data_ticket:a,method_payment:s}){const i={before:[{url:route("home"),name:"Beranda"},{url:route("event",t.slug),name:t.name},{url:route("event.tickets",t.slug),name:"Pilih Tiket"},{url:route("event.data-diri",t.slug),name:"Pengisian Data Diri"}],active:r},{data:E,setData:l,post:p,processing:g}=v({data_ticket:a,event_id:t.id,promo_code:"",promo_percent:"",promo_amount:"",payment_method:""}),h=n=>{n.preventDefault(),p(route("event.payment",t.slug))},[f,b]=d.useState(c({expiration_date:a.expiration_time})),j=()=>{const n=setInterval(()=>{const m=c({expiration_date:a.expiration_time});P(m)<0?(u({title:"Waktu pembelian telah habis",text:"Silahkan lakukan pembelian ulang",icon:"warning"}).then(y=>{y.isConfirmed&&(window.location.href=route("event.tickets",t.slug))}),clearInterval(n)):b(m)},1e3);return()=>clearInterval(n)},{notification:o}=w().props;return d.useEffect(()=>{j(),o&&u(o)},[a.expiration_time,o]),e.jsxs(D,{title:"Pilih Pembayaran",children:[e.jsx(N,{breadCrumbData:i}),e.jsx("form",{action:"",onSubmit:h,method:"POST",children:e.jsxs("div",{className:"mt-8 grid grid-cols-12 gap-8 min-h-[80vh]",children:[e.jsxs("div",{className:"col-span-8 h-fit flex flex-col gap-5",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 text-sm text-yellow-800 border border-yellow-300 rounded-lg bg-yellow-50 dark:bg-gray-800 dark:text-yellow-300 dark:border-yellow-800",role:"alert",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{className:"flex-shrink-0 inline w-4 h-4 me-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"})}),e.jsx("span",{className:"sr-only",children:"Info"}),e.jsx("div",{className:"",children:e.jsx("span",{className:"font-medium",children:"Batas Waktu Pengisian Data"})})]}),e.jsx("div",{className:"",children:e.jsx("span",{className:"poppins-semibold",children:f})})]}),e.jsx(x,{type:"Virtual Account",methods:s.virtual_account,setData:l}),e.jsx(x,{type:"E-Wallet & QRIS",methods:s.e_wallet,setData:l})]}),e.jsx(k,{ticketCount:a.pengunjung.length,event:t,subTotal:a.sub_total,tax:a.tax,taxAmount:a.tax_amount,total:a.total,processing:g})]})})]})}export{A as default};
