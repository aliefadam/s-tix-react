import{j as e,W as w}from"./app-uO8-Avc9.js";import{B as D}from"./BreadCrumb-CbReTh9y.js";import{f as S,E as P}from"./EventDetailPanel-DHY3gwy7.js";import{U as T}from"./UserLayout-DyN6HqX9.js";function x({type:t,id:n,name:r,value:o,handleChange:i,title:a,userType:c,index:s=null,ticketID:d=null}){const l=m=>{c==="pembeli"?i(m,"data_pembeli"):i(m,"data_pengunjung",s,d)};return e.jsxs("div",{children:[e.jsx("label",{htmlFor:n,className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:a}),e.jsx("input",{type:t,id:n,name:r,value:o,onChange:m=>l(m),className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-teal-500 focus:border-teal-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-teal-500 dark:focus:border-teal-500"}),t==="email"&&n==="email"&&e.jsx("span",{className:"text-xs poppins-medium text-teal-700 mt-2 block",children:"Email ini digunakan untuk mengirim E-Ticket"})]})}function v({date:t,month:n,year:r,handleChange:o,userType:i,index:a=null,ticketID:c=null}){const s=d=>{i==="pembeli"?s(d):o(d,"data_pengunjung",a,c)};return e.jsxs("div",{children:[e.jsx("label",{htmlFor:"date",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Tanggal Lahir"}),e.jsxs("div",{className:"grid grid-cols-3 gap-5",children:[e.jsxs("select",{id:"date",name:"date",value:t,onChange:d=>s(d),className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-teal-500 focus:border-teal-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-teal-500 dark:focus:border-teal-500",children:[e.jsx("option",{value:"",children:"Tanggal"}),Array.from({length:31},(d,l)=>e.jsx("option",{value:String(l+1).padStart(2,"0"),children:String(l+1).padStart(2,"0")},l))]}),e.jsxs("select",{id:"month",name:"month",value:n,onChange:d=>s(d),className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-teal-500 focus:border-teal-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-teal-500 dark:focus:border-teal-500",children:[e.jsx("option",{value:"",children:"Bulan"}),Array.from({length:12},(d,l)=>e.jsx("option",{value:String(l+1).padStart(2,"0"),children:String(l+1).padStart(2,"0")},l))]}),e.jsxs("select",{id:"year",name:"year",value:r,onChange:d=>s(d),className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-teal-500 focus:border-teal-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-teal-500 dark:focus:border-teal-500",children:[e.jsx("option",{value:"",children:"Tahun"}),Array.from({length:100},(d,l)=>e.jsx("option",{value:String(2024-l),children:2024-l},l))]})]})]})}function N({gender:t,handleChange:n,index:r=null,ticketID:o=null,userType:i,name:a,idFemale:c,idMale:s}){const d=m=>{i==="pembeli"?n(m,"data_pembeli"):n(m,"data_pengunjung",r,o)},l=m=>t===m;return e.jsxs("div",{children:[e.jsx("label",{htmlFor:"gender",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Jenis Kelamin"}),e.jsxs("div",{className:"grid grid-cols-2 gap-5",children:[e.jsxs("div",{className:"flex items-center ps-4 border border-gray-200 rounded dark:border-gray-700",children:[e.jsx("input",{id:s,type:"radio",value:"Laki-laki",name:a,checked:l("Laki-laki"),onChange:m=>d(m),className:"w-4 h-4 text-teal-600 bg-gray-100 border-gray-300 focus:ring-teal-500 dark:focus:ring-teal-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"}),e.jsx("label",{htmlFor:s,className:"w-full py-4 ms-2 text-sm font-medium text-gray-900 dark:text-gray-300",children:"Laki-laki"})]}),e.jsxs("div",{className:"flex items-center ps-4 border border-gray-200 rounded dark:border-gray-700",children:[e.jsx("input",{id:c,type:"radio",value:"Perempuan",name:a,checked:l("Perempuan"),onChange:m=>d(m),className:"w-4 h-4 text-teal-600 bg-gray-100 border-gray-300 focus:ring-teal-500 dark:focus:ring-teal-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"}),e.jsx("label",{htmlFor:c,className:"w-full py-4 ms-2 text-sm font-medium text-gray-900 dark:text-gray-300",children:"Perempuan"})]})]})]})}function _({identity_type:t,identity_number:n,handleChange:r,userType:o,index:i=null,ticketID:a=null}){const c=s=>{o==="pembeli"?r(s,"data_pembeli"):r(s,"data_pengunjung",i,a)};return e.jsxs("div",{children:[e.jsx("label",{htmlFor:"identity-type",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Nomor Identitas"}),e.jsxs("div",{className:"flex",children:[e.jsxs("select",{id:"identity-type",name:"identity_type",value:t,onChange:s=>c(s),className:"poppins-medium bg-gray-100 rounded-s-lg border border-gray-300 text-gray-900 text-sm focus:ring-teal-500 focus:border-teal-500 block p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-teal-500 dark:focus:border-teal-500",children:[e.jsx("option",{value:"",children:"Pilih Identitas"}),e.jsx("option",{value:"KTP",children:"KTP"}),e.jsx("option",{value:"SIM",children:"SIM"}),e.jsx("option",{value:"PASSPORT",children:"Passport"})]}),e.jsx("input",{type:"number",id:"identity-number",name:"identity_number",value:n,onChange:s=>c(s),className:"bg-gray-50 rounded-e-lg border border-gray-300 text-gray-900 text-sm focus:ring-teal-500 focus:border-teal-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-teal-500 dark:focus:border-teal-500"})]})]})}function E({data_pembeli:t,handleChange:n}){return e.jsxs("div",{className:"border border-teal-700 text-white rounded-md shadow-md overflow-hidden",children:[e.jsx("div",{className:"p-5 bg-gradient-to-r from-teal-400 to-teal-500",children:e.jsx("span",{className:"text-center block",children:"Detail Pembeli"})}),e.jsxs("div",{className:"p-5 flex flex-col gap-4",children:[e.jsx(x,{id:"email",type:"email",name:"email",value:t.email,title:"Email",handleChange:n,userType:"pembeli"}),e.jsx(x,{id:"name",type:"text",name:"name",value:t.name,title:"Nama",handleChange:n,userType:"pembeli"}),e.jsx(v,{date:t.date,month:t.month,year:t.year,handleChange:n}),e.jsx(N,{gender:t.gender,handleChange:n,name:"gender",userType:"pembeli",idFemale:"gender-female",idMale:"gender-male"}),e.jsx(_,{identity_type:t.identity_type,identity_number:t.identity_number,handleChange:n,userType:"pembeli"})]})]})}function I({ticket:t}){return e.jsxs("div",{className:"bg-gray-50 p-4 border border-teal-700 flex justify-between items-center rounded-md shadow-md",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("h1",{className:"text-gray-500 text-sm poppins-medium",children:"Kategori Tiket"}),e.jsx("span",{className:"text-black poppins-medium mt-[3px]",children:t.name})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("h1",{className:"text-gray-500 text-sm poppins-medium text-right",children:"Harga"}),e.jsx("span",{className:"text-black poppins-medium mt-[3px]",children:S(t.price)})]})]})}function $({index:t,ticketID:n,samakanDataPembeli:r}){return e.jsx("span",{className:"text-center block",children:e.jsxs("label",{className:"inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",value:"",className:"sr-only peer samakan-data-pembeli",name:`samakan-data-pembeli[${t}]`,onChange:o=>r(o,t,n)}),e.jsx("div",{className:"shadow-md relative w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-teal-300 dark:peer-focus:ring-teal-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:w-5 after:h-5 after:transition-all dark:border-gray-600 peer-checked:bg-teal-600"}),e.jsx("span",{className:"ms-3 text-sm font-medium text-white dark:text-gray-300",children:"Samakan dengan data pembeli"})]})})}function F({tickets:t,samakanDataPembeli:n,data_pengunjung:r,handleChange:o}){return e.jsx(e.Fragment,{children:t.map((i,a)=>{var c,s,d,l,m,y,g,u;return e.jsxs("div",{className:"border border-teal-700 text-white rounded-md shadow-md overflow-hidden pengunjung",children:[e.jsxs("div",{className:"p-5 flex justify-between items-center bg-gradient-to-r from-teal-400 to-teal-500",children:[e.jsxs("span",{className:"text-center block",children:["Detail Pengunjung ",a+1]}),e.jsx($,{index:a,ticketID:i.id,samakanDataPembeli:n})]}),e.jsxs("div",{className:"p-5 flex flex-col gap-4",children:[e.jsx(I,{ticket:i}),e.jsx(x,{id:`email-pengunjung-${a}`,type:"email",name:"email",title:"Email",handleChange:o,value:(c=r[a])==null?void 0:c.email,userType:"pengunjung",index:a,ticketID:i.id}),e.jsx(x,{id:`name-pengunjung-${a}`,type:"text",name:"name",title:"Nama",handleChange:o,value:(s=r[a])==null?void 0:s.name,index:a,ticketID:i.id}),e.jsx(v,{date:(d=r[a])==null?void 0:d.date,month:(l=r[a])==null?void 0:l.month,year:(m=r[a])==null?void 0:m.year,handleChange:o,index:a,ticketID:i.id}),e.jsx(N,{gender:(y=r[a])==null?void 0:y[`gender-${a}`],handleChange:o,userType:"pengunjung",index:a,ticketID:i.id,data_pengunjung:r,name:`gender-${a}`,idMale:`gender-male-${a}`,idFemale:`gender-female-${a}`}),e.jsx(_,{identity_type:(g=r[a])==null?void 0:g.identity_type,identity_number:(u=r[a])==null?void 0:u.identity_number,handleChange:o,userType:"pengunjung",index:a,ticketID:i.id})]})]},a)})})}const f=(t,n)=>{if(!t)return null;const[r,o,i]=t.split("-");switch(n.toLowerCase()){case"day":return i.toString().padStart(2,"0");case"month":return o.toString().padStart(2,"0");case"year":return r}};function K({profile:t,event:n,data_ticket:r}){const o=[{url:route("home"),name:"Beranda"},{url:route("event",n.slug),name:n.name},{url:route("event.tickets",n.slug),name:"Pilih Tiket"}],i="Pengisian Data Diri",{data:a,setData:c,post:s,processing:d}=w({data_pengunjung:[],data_pembeli:{email:t.email,name:t.name,date:f(t.date_of_birth,"day"),month:f(t.date_of_birth,"month"),year:f(t.date_of_birth,"year"),gender:t.gender,identity_type:t.identity_type,identity_number:t.identity_number},sub_total:r.sub_total,tax:r.tax,tax_amount:r.tax_amount,total:r.total}),l=(g,u,b=null,p=null)=>{const k=g.target.name,j=g.target.value;if(u=="data_pembeli")c("data_pembeli",{...a.data_pembeli,[k]:j});else{const h=[...a.data_pengunjung];h[b]={...h[b],[`ticket_id-${b}`]:p,[k]:j},c("data_pengunjung",h)}},m=(g,u,b)=>{const p=[...a.data_pengunjung];g.target.checked?p[u]={...p[u],[`ticket_id-${u}`]:b,email:a.data_pembeli.email,name:a.data_pembeli.name,date:a.data_pembeli.date,month:a.data_pembeli.month,year:a.data_pembeli.year,[`gender-${u}`]:a.data_pembeli.gender,identity_type:a.data_pembeli.identity_type,identity_number:a.data_pembeli.identity_number}:p[u]={...p[u],[`ticket_id-${u}`]:null,email:"",name:"",date:"",month:"",year:"",[`gender-${u}`]:"",identity_type:"",identity_number:""},c("data_pengunjung",p)},y=async g=>{g.preventDefault(),s(route("event.pembayaran",n.slug))};return e.jsxs(T,{title:"Detail Event",children:[e.jsx(D,{active:i,before:o}),e.jsx("form",{action:"",onSubmit:y,children:e.jsxs("div",{className:"mt-8 grid grid-cols-12 gap-8 min-h-[80vh]",children:[e.jsxs("div",{className:"col-span-8 h-fit flex flex-col gap-5 border",children:[e.jsx(E,{data_pembeli:a.data_pembeli,handleChange:l}),e.jsx(F,{data_pengunjung:a.data_pengunjung,handleChange:l,tickets:r.tickets,samakanDataPembeli:m})]}),e.jsx("div",{className:"col-span-4 h-fit sticky top-[110px] bg-white border border-teal-700 shadow-md rounded-md",children:e.jsx(P,{processing:d,event:n,subTotal:r.sub_total,ticketCount:r.tickets.length,tax:r.tax,taxAmount:r.tax_amount,total:r.total})})]})})]})}export{K as default};
