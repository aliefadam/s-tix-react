import{j as e,a as j,r as u,q as f,W as y}from"./app-DJeNTTl8.js";import{B as b}from"./BreadCrumb-CLBvrp4w.js";import{i as N}from"./initDataTable-B5g74eJO.js";import{A as k}from"./AdminLayout-DHXEdBK2.js";import{N as v}from"./notification-hbyfIv5m.js";import{s as p}from"./showConfirmation-Dvs7K4RM.js";import{S as g}from"./sweetalert2.esm.all-D3pEHXw3.js";function w(){return e.jsx("thead",{className:"text-xs text-teal-700 uppercase border-b border-t dark:text-teal-400",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-5",children:"No"}),e.jsx("th",{scope:"col",className:"px-6 py-5",children:"Kode Voucher"}),e.jsx("th",{scope:"col",className:"px-6 py-5",children:"Unit"}),e.jsx("th",{scope:"col",className:"px-6 py-5",children:"Nominal"}),e.jsx("th",{scope:"col",className:"px-6 py-5",children:"Minimal Pembelian"}),e.jsx("th",{scope:"col",className:"px-6 py-5",children:"Maksimal Pemakaian"}),e.jsx("th",{scope:"col",className:"px-6 py-5",children:"Telah Dipakai"}),e.jsx("th",{scope:"col",className:"px-6 py-5",children:"Status"}),e.jsx("th",{scope:"col",className:"px-6 py-5",children:"Aksi"})]})})}function x({route:t,title:s,onClick:r}){return e.jsx(j,{onClick:r,href:t,className:"block px-4 py-3 hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white",children:s})}function V({vouchers:t,handleDelete:s,handleActiveVoucher:r,handleDeactiveVoucher:o,handleSelectUsageVoucher:n=()=>{}}){return e.jsx("tbody",{children:t.map((a,l)=>e.jsxs("tr",{className:"bg-white border-b dark:bg-gray-800 dark:border-gray-700",children:[e.jsx("td",{className:"px-6 py-5",children:l+1}),e.jsx("td",{className:"px-6 py-5",children:a.code}),e.jsx("td",{className:"px-6 py-5 capitalize",children:a.unit}),e.jsx("td",{className:"px-6 py-5",children:a.nominal}),e.jsx("td",{className:"px-6 py-5",children:a.minimal_transaction}),e.jsx("td",{className:"px-6 py-5",children:a.maximal_used}),e.jsxs("td",{className:"px-6 py-5 flex items-center",children:[e.jsxs("span",{className:"poppins-semibold w-[30px] h-[30px] flex items-center",children:[a.used,"x"]}),a.used!=0&&e.jsx("button",{onClick:()=>n(a.id),"data-modal-target":"detail-usage-voucher","data-modal-toggle":"detail-usage-voucher",type:"button",className:"text-white bg-teal-700 hover:bg-teal-800 focus:ring-4 focus:ring-teal-300 font-medium rounded-lg text-xs px-3 py-2.5",children:"Detail"})]}),e.jsx("td",{className:"px-6 py-5",children:a.active?e.jsx("span",{className:"bg-green-100 text-green-800 text-xs font-medium px-2.5 py-0.5 rounded dark:bg-green-900 dark:text-green-300",children:"Aktif"}):e.jsx("span",{className:"bg-red-100 text-red-800 text-xs font-medium px-2.5 py-0.5 rounded dark:bg-red-900 dark:text-red-300",children:"Nonaktif"})}),e.jsxs("td",{className:"px-6 py-5",children:[e.jsx("button",{id:`dropdownDefaultButton-${l}`,className:"w-[30px] py-2 px-3 focus:ring-4 focus:outline-none focus:ring-gray-200 rounded-md","data-dropdown-toggle":`dropdown-${l}`,children:e.jsx("i",{className:"fa-solid fa-ellipsis-vertical"})}),e.jsx("div",{id:`dropdown-${l}`,className:"z-10 hidden bg-white divide-y divide-gray-100 rounded-lg shadow w-32 dark:bg-gray-700",children:e.jsxs("ul",{className:"py-2 text-sm text-gray-700 dark:text-gray-200","aria-labelledby":`dropdownDefaultButton-${l}`,children:[e.jsx("li",{children:e.jsx(x,{route:route("admin.voucher.edit",a.id),title:"Edit"})}),e.jsx("li",{children:e.jsx(x,{route:"#",title:"Hapus",onClick:d=>s(d,a.id)})}),e.jsx("li",{children:a.active?e.jsx(x,{onClick:d=>o(d,a.id),route:"#",title:"Nonaktifkan"}):e.jsx(x,{onClick:d=>r(d,a.id),route:"#",title:"Aktifkan"})})]})})]})]},l))})}function D(){return e.jsxs("div",{className:"flex items-center justify-between p-4 md:p-5 border-b rounded-t dark:border-gray-600",children:[e.jsx("h3",{className:"text-lg font-semibold text-teal-800 dark:text-white",children:"Penggunaan Voucher"}),e.jsxs("button",{type:"button",className:"text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white","data-modal-hide":"detail-usage-voucher",children:[e.jsx("svg",{className:"w-3 h-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14",children:e.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"})}),e.jsx("span",{className:"sr-only",children:"Close modal"})]})]})}function C({voucher_usage:t}){return e.jsxs("table",{className:"w-full text-sm text-left rtl:text-right text-gray-500 dark:text-gray-400",children:[e.jsx("thead",{className:"text-xs text-white uppercase bg-teal-700",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-4",children:"No"}),e.jsx("th",{scope:"col",className:"px-6 py-4",children:"Nama Pengguna"}),e.jsx("th",{scope:"col",className:"px-6 py-4",children:"Email Pengguna"}),e.jsx("th",{scope:"col",className:"px-6 py-4",children:"Event"}),e.jsx("th",{scope:"col",className:"px-6 py-4",children:"Digunakan Pada"})]})}),e.jsx("tbody",{children:t.map((s,r)=>e.jsxs("tr",{className:"bg-white border-b dark:bg-gray-800 dark:border-gray-700",children:[e.jsx("td",{className:"px-6 py-4",children:r+1}),e.jsx("td",{className:"px-6 py-4",children:s.user_name}),e.jsx("td",{className:"px-6 py-4",children:s.user_email}),e.jsx("td",{className:"px-6 py-4",children:s.event_name}),e.jsx("td",{className:"px-6 py-4",children:s.used_at})]},r))})]})}function T({voucher_usage:t}){return e.jsx("div",{className:"p-4 h-[500px] overflow-y-auto scrollbar",children:e.jsx("div",{className:"relative overflow-x-auto",children:e.jsx(C,{voucher_usage:t})})})}function A({voucher_usage:t}){return e.jsx("div",{id:"detail-usage-voucher",tabIndex:-1,"aria-hidden":"true",className:"hidden overflow-y-auto overflow-x-hidden fixed top-0 right-0 left-0 z-50 justify-center items-center w-full md:inset-0 h-[calc(100%-1rem)] max-h-full",children:e.jsx("div",{className:"relative p-4 w-[60%] max-h-full",children:e.jsxs("div",{className:"relative bg-white rounded-lg shadow dark:bg-gray-700",children:[e.jsx(D,{}),e.jsx(T,{voucher_usage:t})]})})})}function B({vouchers:t,usage_voucher:s,handleDeleteVoucher:r,handleActiveVoucher:o,handleDeactiveVoucher:n}){const[a,l]=u.useState([]),d=h=>{l(s.filter(i=>i.voucher_id==h))};return u.useEffect(()=>{N()},[]),e.jsxs("div",{className:"relative",children:[e.jsxs("table",{className:"w-full text-sm text-left rtl:text-right text-gray-500 dark:text-gray-400",id:"dataTable",children:[e.jsx(w,{}),e.jsx(V,{handleSelectUsageVoucher:d,handleActiveVoucher:o,handleDeactiveVoucher:n,vouchers:t,handleDelete:r})]}),s.length>0&&e.jsx(A,{voucher_usage:a})]})}function S(){return e.jsxs("div",{className:"bg-teal-700 rounded-t-md py-4 px-5 flex items-center justify-between",children:[e.jsx("h1",{className:"text-lg poppins-medium text-white",children:"Data Voucher"}),e.jsxs(j,{href:route("admin.voucher.create"),className:"bg-white text-teal-700 hover:bg-gray-100 focus:outline-none focus:ring-4 focus:ring-gray-200 font-medium rounded-md text-sm px-5 py-2.5 text-center",children:[e.jsx("i",{className:"fa-solid fa-plus mr-1.5"}),"Tambah Voucher"]})]})}const m=()=>{g.fire({title:"Loading",allowOutsideClick:!1,didOpen:()=>{g.showLoading()}})};function $({title:t,vouchers:s,usage_voucher:r}){const o={active:t},{notification:n}=f().props;u.useEffect(()=>{n&&v(n)},[n]);const a=y(),l=(i,c)=>{i.preventDefault(),p({title:"Hapus Voucher",text:"Apakah anda yakin menghapus voucher ini ?",onConfirm:()=>{a.delete(route("admin.voucher.delete",c),{onStart:()=>{m()}})}})},d=(i,c)=>{i.preventDefault(),p({title:"Hapus Voucher",text:"Apakah anda yakin menonaktifkan voucher ini ?",onConfirm:()=>{a.put(route("admin.voucher.deactivate",c),{onStart:()=>{m()}})}})},h=(i,c)=>{i.preventDefault(),p({title:"Hapus Voucher",text:"Apakah anda yakin mengaktifkan voucher ini ?",onConfirm:()=>{a.put(route("admin.voucher.activate",c),{onStart:()=>{m()}})}})};return e.jsxs(k,{title:t,children:[e.jsx(b,{breadCrumbData:o}),e.jsxs("div",{className:"mt-5 bg-white shadow-md rounded-md overflow-hiddens",children:[e.jsx(S,{}),e.jsx(B,{vouchers:s,usage_voucher:r,handleDeleteVoucher:l,handleActiveVoucher:h,handleDeactiveVoucher:d})]})]})}export{$ as default};
