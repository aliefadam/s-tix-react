import{j as e,q as Z,r as ee,i as te,W as g}from"./app-Ba9_fQmq.js";import{B as ae}from"./BreadCrumb-CwhL5mzV.js";import{I as b}from"./InputGroup-CsNenfUe.js";import{B as D}from"./Button-nHBbq0Jl.js";import{A as se}from"./AdminLayout-1Lw1m0pE.js";import{N as re}from"./notification-D8nuFN0y.js";import{s as M}from"./showConfirmation-2MnBgizT.js";function de({name:s,id:t}){return e.jsxs("div",{className:"flex items-center justify-between p-4 md:p-5 border-b rounded-t dark:border-gray-600",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:s}),e.jsxs("button",{type:"button",className:"text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white","data-modal-hide":t,children:[e.jsx("svg",{className:"w-3 h-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14",children:e.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"})}),e.jsx("span",{className:"sr-only",children:"Close modal"})]})]})}function le({id:s,error:t,label:r,onChange:l}){const i=()=>t?"border border-red-500 focus:border-red-500 focus:ring-0":"border border-gray-300 focus:ring-teal-500 focus:border-teal-500";return e.jsxs("div",{className:"",children:[e.jsx("label",{className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",htmlFor:s,children:r}),e.jsx("input",{className:`block w-full text-sm text-gray-900 bg-gray-50 ${i()} rounded-lg focus:outline-none`,id:s,name:s,type:"file",onChange:l}),t&&e.jsx("p",{className:"mt-2 text-sm text-red-600 dark:text-red-500",children:t})]})}function ne({data:s,setData:t,errors:r,handleFileChange:l}){return e.jsxs("div",{className:"p-4 md:p-5",children:[e.jsx(b,{id:"name",label:"Nama Talent",type:"text",value:s.name,onChange:i=>t("name",i.target.value),error:r.name}),e.jsx(le,{error:r.image,id:"image",label:"Foto Talent | Gunakan Ukuran 1:1",onChange:i=>l(i)})]})}function I({type:s,name:t,props:r}){return e.jsx("button",{type:s,className:"text-gray-900 bg-white border border-gray-300 focus:outline-none hover:bg-gray-100 focus:ring-4 focus:ring-gray-100 font-medium rounded-lg text-sm px-5 py-2.5",...r,children:t})}function ie({processing:s,id:t}){return e.jsxs("div",{className:"flex items-center gap-3 p-4 md:p-5 border-t border-gray-200 rounded-b dark:border-gray-600",children:[e.jsx(D,{processing:s,type:"submit",color:"teal",name:t==="add-talent-modal"?"Tambah":"Simpan"}),e.jsx(I,{name:"Batal",type:"button",props:{"data-modal-hide":t,id:`close-${t}`}})]})}function B({id:s,name:t,data:r,setData:l,processing:i,errors:u,handleSubmit:h,handleFileChange:p}){return e.jsx("div",{id:s,tabIndex:-1,"aria-hidden":"true",className:"hidden overflow-y-auto overflow-x-hidden fixed top-0 right-0 left-0 z-50 justify-center items-center w-full md:inset-0 h-[calc(100%-1rem)] max-h-full",children:e.jsx("div",{className:"relative p-4 w-full max-w-2xl max-h-full",children:e.jsxs("div",{className:"relative bg-white rounded-lg shadow dark:bg-gray-700",children:[e.jsx(de,{id:s,name:t}),e.jsxs("form",{onSubmit:h,action:"",encType:"multipart/form-data",children:[e.jsx(ne,{data:r,setData:l,handleFileChange:p,errors:u}),e.jsx(ie,{id:s,processing:i})]})]})})})}function oe({id:s,name:t}){return e.jsxs("div",{className:"flex items-center justify-between p-4 md:p-5 border-b rounded-t dark:border-gray-600",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:t}),e.jsxs("button",{type:"button",className:"text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white","data-modal-hide":s,children:[e.jsx("svg",{className:"w-3 h-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14",children:e.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"})}),e.jsx("span",{className:"sr-only",children:"Close modal"})]})]})}function ce({data:s,setData:t,errors:r}){return e.jsxs("div",{className:"p-4 md:p-5",children:[e.jsx(b,{id:"name",label:"Nama Tiket",value:s.name,onChange:l=>t("name",l.target.value),type:"text",error:r.name,placeholder:"Presale 1"}),e.jsx(b,{id:"price",label:"Harga",value:s.price,onChange:l=>t("price",l.target.value),type:"number",error:r.price}),e.jsx("div",{className:"-mb-5",children:e.jsx(b,{id:"target",label:"Target Penjualan",value:s.target,onChange:l=>t("target",l.target.value),type:"number",error:r.target})})]})}function me({processing:s,id:t}){return e.jsxs("div",{className:"flex items-center gap-3 p-4 md:p-5 border-t border-gray-200 rounded-b dark:border-gray-600",children:[e.jsx(D,{processing:s,type:"submit",color:"teal",name:t==="add-ticket-modal"?"Tambah":"Simpan"}),e.jsx(I,{name:"Batal",type:"button",props:{"data-modal-hide":t,id:`close-${t}`}})]})}function A({id:s,name:t,data:r,setData:l,processing:i,errors:u,handleSubmit:h}){return e.jsx("div",{id:s,tabIndex:-1,"aria-hidden":"true",className:"hidden overflow-y-auto overflow-x-hidden fixed top-0 right-0 left-0 z-50 justify-center items-center w-full md:inset-0 h-[calc(100%-1rem)] max-h-full",children:e.jsx("div",{className:"relative p-4 w-full max-w-2xl max-h-full",children:e.jsxs("div",{className:"relative bg-white rounded-lg shadow dark:bg-gray-700",children:[e.jsx(oe,{name:t,id:s}),e.jsxs("form",{onSubmit:h,action:"",method:"POST",children:[e.jsx(ce,{data:r,setData:l,errors:u}),e.jsx(me,{id:s,processing:i})]})]})})})}const xe=s=>{let t,r=[],l;const i=s;async function u(){const n={lat:-6.2,lng:106.816666},c=await h(i)||n,{Map:m}=await google.maps.importLibrary("maps");t=new m(document.getElementById("map"),{center:c,zoom:12});const x=document.getElementById("pac-input"),{SearchBox:f}=await google.maps.importLibrary("places");l=new f(x),t.controls[google.maps.ControlPosition.TOP_LEFT].push(x),t.addListener("bounds_changed",()=>{l.setBounds(t.getBounds())}),c!==n&&j(c)}async function h(n){if(!n)return null;const c=n.match(/place_id:([^&]+)/);if(c){const x=c[1];return p(x)}const m=n.match(/query=(-?\d+\.\d+),(-?\d+\.\d+)/);return m?{lat:parseFloat(m[1]),lng:parseFloat(m[2])}:null}async function p(n){const c=new google.maps.Geocoder;return new Promise(m=>{c.geocode({placeId:n},function(x,f){f==="OK"&&x[0].geometry.location?m({lat:x[0].geometry.location.lat(),lng:x[0].geometry.location.lng()}):m(null)})})}function j(n){N();const c=new google.maps.Marker({position:n,map:t});r.push(c)}function N(){for(let n=0;n<r.length;n++)r[n].setMap(null);r=[]}u()};function Ne({title:s,event:t,tickets:r,talents:l}){const i={before:[{url:route("admin.event.index"),name:"Event"}],active:`Detail Event : ${s}`},{notification:u}=Z().props;ee.useEffect(()=>{u&&(te(),re(u)),xe(t.maps_link)},[u]);const{data:h,setData:p,post:j,processing:N,errors:n,reset:c}=g({name:"",price:"",target:""}),{data:m,setData:x,put:f,processing:S,errors:F,reset:L}=g({id:"",name:"",price:"",target:""}),{data:_,setData:v,post:P,processing:G,errors:z,reset:q}=g({name:"",image:""}),{data:y,setData:k,post:H,processing:K,errors:$,reset:O}=g({id:"",name:"",image:null}),U=a=>{a.preventDefault(),j(route("admin.ticket.store",t.id),{onSuccess:()=>{document.getElementById("close-add-ticket-modal").click(),c()}})},W=a=>{a.preventDefault(),f(route("admin.ticket.update",m.id),{onSuccess:()=>{document.getElementById("close-edit-ticket-modal").click(),L()}})},R=g(),w=(a,d)=>{a.preventDefault(),M({title:"Apakah kamu yakin?",text:"Anda tidak dapat mengembalikan data ini!",onConfirm:()=>{R.delete(route("admin.ticket.delete",d))}})},J=a=>{a.preventDefault(),P(route("admin.talent.store",t.id),{onSuccess:()=>{document.getElementById("close-add-talent-modal").click(),document.getElementById("image").value="",q()}})},Q=a=>{a.preventDefault(),H(route("admin.talent.update",t.id),{onStart:()=>{console.log(y)},onSuccess:()=>{document.getElementById("close-edit-talent-modal").click(),document.getElementById("image").value="",O()},onError:d=>{console.log(d)}})},V=g(),T=(a,d)=>{a.preventDefault(),M({title:"Apakah kamu yakin?",text:"Anda tidak dapat mengembalikan data ini!",onConfirm:()=>{V.delete(route("admin.talent.delete",d))}})},E=a=>{const d=r.find(o=>o.id===a);x({id:d.id,name:d.name,price:d.price,target:d.target})},C=a=>{const d=l.find(o=>o.id===a);k(o=>({...o,id:d.id,name:d.name,image:null,_method:"PUT"}))},X=a=>{const d=a.target.files[0];v("image",d)},Y=a=>{const d=a.target.files[0];k("image",d)};return e.jsxs(se,{title:s,children:[e.jsx(ae,{breadCrumbData:i}),e.jsxs("div",{className:"mt-5 grid grid-cols-12 gap-5",children:[e.jsxs("div",{className:"h-fit col-span-7 flex flex-col gap-5",children:[e.jsxs("div",{className:"bg-white shadow-md rounded-md",children:[e.jsxs("div",{className:"flex flex-col p-5 border-b",children:[e.jsx("h1",{className:"text-xl poppins-semibold",children:t.name}),e.jsxs("span",{className:"text-sm",children:["by ",t.user.name]})]}),e.jsxs("div",{className:"p-5",children:[e.jsx("div",{className:"",children:e.jsx("img",{className:"rounded-md",src:t.banner})}),e.jsx("div",{className:"mt-3 ckeditor",dangerouslySetInnerHTML:{__html:t.description}})]})]}),e.jsxs("div",{className:"bg-white shadow-md rounded-md",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-5 p-5 border-b",children:[e.jsxs("div",{className:"flex flex-col gap-1.5",children:[e.jsxs("h1",{className:"flex items-center",children:[e.jsx("i",{className:"fa-solid fa-circle mr-1.5 text-xs text-green-700"})," ","Mulai"]}),e.jsxs("span",{className:"text-sm",children:[t.date," | ",t.time]})]}),e.jsxs("div",{className:"flex flex-col gap-1.5",children:[e.jsxs("h1",{className:"flex items-center",children:[e.jsx("i",{className:"fa-solid fa-circle mr-1.5 text-xs text-red-700"}),"Selesai"]}),e.jsxs("span",{className:"text-sm",children:[t.date_end," | ",t.time_end]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-5 p-5 border-b",children:[e.jsxs("div",{className:"",children:[e.jsx("h1",{className:"poppins-medium text-lg",children:"Lokasi"}),e.jsx("div",{className:"mt-5 flex gap-1 items-center",children:e.jsxs("p",{className:"leading-5",children:[e.jsx("span",{className:"poppins-medium",children:t.building_name})," ","| ",t.address]})}),e.jsx("a",{target:"_blank",href:t.maps_link,className:"mt-2 block text-sm text-blue-500 hover:text-blue-600",children:"Buka di Google Maps"})]}),e.jsx("div",{className:"",children:e.jsx("div",{id:"map",className:"border h-[250px]"})})]})]})]}),e.jsxs("div",{className:"h-fit col-span-5 flex flex-col gap-5",children:[e.jsxs("div",{className:"p-5 bg-white shadow-md rounded-md",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-lg poppins-semibold",children:"Kategori Tiket"}),e.jsx("button",{"data-modal-target":"add-ticket-modal","data-modal-toggle":"add-ticket-modal",className:"bg-teal-700 shadow-sm text-white size-10 rounded-full focus:ring-4 focus:ring-teal-300 hover:bg-teal-800 duration-200",children:e.jsx("i",{className:"fa-solid fa-plus"})})]}),e.jsx("div",{className:"mt-5 flex flex-col gap-6",children:r.map((a,d)=>e.jsxs("div",{className:"border rounded-md px-5 py-3 relative overflow-hiddens",children:[e.jsx("div",{className:"absolute rounded-s-md top-0 left-0 bottom-0 w-[5px] bg-red-700"}),e.jsxs("div",{className:"absolute -top-[15px] left-0 flex justify-center w-full gap-2",children:[e.jsx("button",{onClick:()=>E(a.id),"data-modal-target":"edit-ticket-modal","data-modal-toggle":"edit-ticket-modal",className:"btn-edit-ticket border border-yellow-600 text-yellow-600 hover:bg-yellow-600 hover:text-white duration-200 bg-white rounded-md p-2",children:e.jsx("i",{className:"fa-regular fa-pen-to-square",onClick:()=>E(a.id)})}),e.jsx("button",{onClick:o=>w(o,a.id),className:"btn-delete-ticket border border-red-600 text-red-600 hover:bg-red-600 hover:text-white duration-200 bg-white rounded-md p-2",children:e.jsx("i",{className:"fa-regular fa-trash",onClick:o=>w(o,a.id)})})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("h1",{className:"text-sm text-gray-600",children:a.name}),e.jsx("span",{className:"text-sm poppins-medium",children:a.format_price})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("h1",{className:"text-sm text-right text-gray-600",children:"Target"}),e.jsxs("span",{className:"text-sm text-right poppins-medium",children:[e.jsx("span",{className:"text-gray-600",children:a.sold}),"/",e.jsx("span",{children:a.target})]})]})]})]},d))})]}),e.jsxs("div",{className:"p-5 bg-white shadow-md rounded-md",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-lg poppins-semibold",children:"Talents"}),e.jsx("button",{"data-modal-target":"add-talent-modal","data-modal-toggle":"add-talent-modal",className:"bg-teal-700 shadow-sm text-white size-10 rounded-full focus:ring-4 focus:ring-teal-300 hover:bg-teal-800 duration-200",children:e.jsx("i",{className:"fa-solid fa-plus"})})]}),e.jsx("div",{className:"mt-5 flex flex-col gap-3",children:l.map((a,d)=>e.jsx("div",{className:"border rounded-md px-5 py-3 relative overflow-hiddens",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{className:"w-[50px] h-[50px] rounded-full object-cover",src:a.image,alt:""}),e.jsx("span",{className:"text-sm poppins-medium",children:a.name})]}),e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx("button",{onClick:()=>C(a.id),"data-modal-target":"edit-talent-modal","data-modal-toggle":"edit-talent-modal",className:"btn-edit-talent border border-yellow-600 text-yellow-600 hover:bg-yellow-600 hover:text-white duration-200 bg-white rounded-md p-2",children:e.jsx("i",{className:"fa-regular fa-pen-to-square",onClick:()=>C(a.id)})}),e.jsx("button",{onClick:o=>T(o,a.id),className:"btn-delete-talent border border-red-600 text-red-600 hover:bg-red-600 hover:text-white duration-200 bg-white rounded-md p-2",children:e.jsx("i",{className:"fa-regular fa-trash",onClick:o=>T(o,a.id)})})]})]})},d))})]})]})]}),e.jsx(A,{id:"add-ticket-modal",name:"Tambah Kategori Tiket",data:h,setData:p,processing:N,handleSubmit:U,errors:n}),e.jsx(A,{id:"edit-ticket-modal",name:"Edit Kategori Tiket",data:m,setData:x,processing:S,handleSubmit:W,errors:F}),e.jsx(B,{id:"add-talent-modal",name:"Tambah Talent",data:_,setData:v,processing:G,handleSubmit:J,errors:z,handleFileChange:X}),e.jsx(B,{id:"edit-talent-modal",name:"Edit Talent",data:y,setData:k,processing:K,handleSubmit:Q,errors:$,handleFileChange:Y})]})}export{Ne as default};
