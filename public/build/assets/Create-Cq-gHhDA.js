import{j as e,W as E,r as P}from"./react-CvdimOb_.js";import{B as F}from"./BreadCrumb-BM_g8UbZ.js";import{B as M}from"./Button-Cf0_gnbI.js";import{I as _}from"./InputGroup-DyF1ydnE.js";import{A as S}from"./AdminLayout-D2prnyar.js";import{C as z,E as N,B as C,I,b as A,c as D,P as L,L as T,d as $,f as R,g as G,h as U,H as q,i as H,j as O,l as K,m as W,n as J,o as Q,p as V,q as X,u as Y,v as Z,M as ee,w as ae,x as te,T as ne,y as se,z as re,A as oe,U as le,D as ie,G as de,J as me}from"./vendor-WcNsT5NC.js";import"./lodash-C5IC_buG.js";function B({errorDate:r,errorTime:t,valueDate:a,valueTime:s,onChangeDate:i,onChangeTime:b,label:o,idDate:l,idTime:m}){const n=()=>r||t?"border border-red-500 focus:border-red-500 focus:ring-0":"border border-gray-300 focus:ring-teal-500 focus:border-teal-500";return e.jsxs("div",{className:"flex-[1]",children:[e.jsx("label",{htmlFor:l,className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:o}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"date",id:l,name:l,value:a,onChange:i,className:`bg-gray-50 text-gray-900 text-sm rounded-lg block w-full p-2.5 ${n()}`}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 end-0 top-0 flex items-center pe-3.5 pointer-events-none",children:e.jsx("i",{className:"w-4 h-4 fa-solid fa-clock"})}),e.jsx("input",{type:"time",id:m,name:m,value:s,onChange:b,className:`bg-gray-50 text-gray-900 text-sm rounded-lg block w-full p-2.5 ${n()}`})]})]}),r&&e.jsx("p",{className:"mt-2 text-sm text-red-600 dark:text-red-500",children:r}),t&&e.jsx("p",{className:"mt-2 text-sm text-red-600 dark:text-red-500",children:t})]})}function ce({onChange:r,errors:t}){const a=()=>t.banner?"border border-red-500 focus:border-red-500 focus:ring-0":"border border-gray-300 focus:ring-teal-500 focus:border-teal-500";return e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"poppins-semibold text-lg",children:"Banner Event"}),e.jsxs("div",{className:"mb-5 mt-5",children:[e.jsx("label",{htmlFor:"name",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Pilih Gambar | Gunakan Ratio 16:9"}),e.jsx("input",{id:"banner",name:"banner",type:"file",onChange:r,className:`bg-gray-50 text-gray-900 text-sm rounded-lg block w-full ${a()}`}),t.banner&&e.jsx("p",{className:"mt-2 text-sm text-red-600 dark:text-red-500",children:t.banner})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("span",{className:"text-sm poppins-medium",children:"Preview Image"}),e.jsx("img",{src:"https://via.placeholder.com/1600x900",alt:"Placeholder Image",className:"rounded-lg shadow-md w-full h-[259px] object-cover",id:"banner-preview"})]})]})}function ge({data:r,setData:t,errors:a}){const s=()=>a.building_name||a.address?"border border-red-500 focus:border-red-500 focus:ring-0":"border border-gray-300 focus:ring-teal-500 focus:border-teal-500";return e.jsxs("div",{className:"mb-5",children:[e.jsx("label",{htmlFor:"tax",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Lokasi Event"}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("input",{type:"text",id:"building_name",name:"building_name",value:r.building_name,onChange:i=>t("building_name",i.target.value),className:`bg-gray-50 text-gray-900 text-sm rounded-lg block w-full p-2.5 ${s()}`,placeholder:"Nama Tempat"}),a.building_name&&e.jsx("p",{className:"text-sm text-red-600 dark:text-red-500",children:a.building_name}),e.jsx("input",{type:"text",id:"address",name:"address",value:r.address,onChange:i=>t("address",i.target.value),className:`bg-gray-50 text-gray-900 text-sm rounded-lg block w-full p-2.5 ${s()}`,placeholder:"Alamat"}),a.address&&e.jsx("p",{className:"text-sm text-red-600 dark:text-red-500",children:a.address})]})]})}function pe(){return e.jsxs("div",{className:"mt-3 mb-5 hidden",id:"google-map",children:[e.jsx("label",{htmlFor:"",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Berikan titik pada peta"}),e.jsx("input",{id:"pac-input",className:"controls bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-md shadow-md focus:ring-blue-500 focus:border-blue-500 block p-2.5 ml-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500 mt-2.5",type:"text",placeholder:"Cari Lokasi"}),e.jsx("div",{id:"map",style:{height:300}})]})}const ue=({id:r,setData:t})=>{z.create(document.querySelector(`#${r}`),{licenseKey:"GPL",plugins:[N,C,I,A,D,L,T,$,C,R,G,U,N,q,H,O,K,W,J,Q,V,X,Y,I,Z,T,ee,L,ae,te,ne,se,re,oe,le,ie,de,me],toolbar:["undo","redo","|","heading","|","bold","italic","underline","|","link","bulletedList","numberedList","|","alignment:left","alignment:center","alignment:right","alignment:justify"],heading:{options:[{model:"paragraph",title:"Paragraph",class:"ck-heading_paragraph"},{model:"heading1",view:"h1",title:"Heading 1",class:"ck-heading_heading1"},{model:"heading2",view:"h2",title:"Heading 2",class:"ck-heading_heading2"},{model:"heading3",view:"h3",title:"Heading 3",class:"ck-heading_heading3"},{model:"heading4",view:"h4",title:"Heading 4",class:"ck-heading_heading4"}]},image:{resizeOptions:[{name:"resizeImage:original",label:"Default image width",value:null},{name:"resizeImage:50",label:"50% page width",value:"50"},{name:"resizeImage:75",label:"75% page width",value:"75"}],toolbar:["imageTextAlternative","toggleImageCaption","|","imageStyle:inline","imageStyle:wrapText","imageStyle:breakText","|","resizeImage"]},link:{addTargetToExternalLinks:!0,defaultProtocol:"https://"},table:{contentToolbar:["tableColumn","tableRow","mergeTableCells"]},alignment:{options:["left","center","right","justify"]}}).then(a=>{a.model.document.on("change:data",()=>{const s=a.getData();t(i=>({...i,[r]:s}))})}).catch()},xe=({setData:r})=>{let t,a=[],s;async function i(){const m={lat:-6.2,lng:106.816666},{Map:n}=await google.maps.importLibrary("maps");t=new n(document.getElementById("map"),{center:m,zoom:8,mapTypeControl:!1});const c=document.getElementById("pac-input"),{SearchBox:f}=await google.maps.importLibrary("places");s=new f(c),t.controls[google.maps.ControlPosition.TOP_LEFT].push(c),document.getElementById("google-map").classList.remove("hidden"),t.addListener("bounds_changed",()=>{s.setBounds(t.getBounds())}),s.addListener("places_changed",()=>{var k;const g=s.getPlaces(),p=(k=g[0])==null?void 0:k.place_id;if(g.length==0)return;o();const u=new google.maps.LatLngBounds;g.forEach(d=>{if(!d.geometry||!d.geometry.location){console.log("Returned place contains no geometry");return}const v=new google.maps.Marker({map:t,title:d.name,position:d.geometry.location});if(a.push(v),d.geometry.viewport?u.union(d.geometry.viewport):u.extend(d.geometry.location),p){const x=`https://www.google.com/maps/place/?q=place_id:${p}`;r(h=>({...h,maps_link:x}))}else new google.maps.Geocoder().geocode({location:d.geometry.location},function(h,y){if(y==="OK"&&h[0]){const j=`https://www.google.com/maps/place/?q=${h[0].formatted_address}`;r(w=>({...w,maps_link:j}))}})}),t.fitBounds(u)}),t.addListener("click",function(g){const p=g.placeId,u=g.latLng,k=u.lat(),d=u.lng();if(p){const v=`https://www.google.com/maps/place/?q=place_id:${p}`;r(x=>({...x,maps_link:v}))}else new google.maps.Geocoder().geocode({location:{lat:k,lng:d}},function(x,h){if(h==="OK"&&x[0]){const y=x[0].formatted_address,j=`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(y)}`;r(w=>({...w,maps_link:j}))}});b(u)})}function b(l){o();const m=new google.maps.Marker({position:l,map:t});a.push(m)}function o(){for(let l=0;l<a.length;l++)a[l].setMap(null);a=[]}i()};function we({title:r}){const t={before:[{url:route("admin.event.index"),name:"Event"}],active:r},{data:a,setData:s,post:i,processing:b,errors:o}=E({name:"",tax:0,description:"",start_date:"",start_time:"",end_date:"",end_time:"",building_name:"",address:"",maps_link:"",banner:null}),l=n=>{const c=n.target.files[0];if(s("banner",c),c){const f=new FileReader;f.onload=function(g){const p=document.getElementById("banner-preview");p.src=g.target.result},f.readAsDataURL(c)}};P.useEffect(()=>{ue({id:"description",setData:s}),xe({setData:s})},[]);const m=n=>{n.preventDefault(),i(route("admin.event.store"),{forceFormData:!0,onError:c=>{console.log(c)}})};return e.jsxs(S,{title:r,children:[e.jsx(F,{breadCrumbData:t}),e.jsx("form",{onSubmit:m,action:"",method:"POST",encType:"multipart/form-data",children:e.jsxs("div",{className:"mt-5 grid grid-cols-12 gap-7 bg-white p-5",children:[e.jsxs("div",{className:"col-span-7",children:[e.jsx("h1",{className:"poppins-semibold text-lg mb-5",children:"Informasi Umum"}),e.jsx(_,{id:"name",label:"Nama Event",onChange:n=>s("name",n.target.value),type:"text",value:a.name,error:o.name}),e.jsx(_,{id:"tax",label:"Pajak (%)",onChange:n=>s("tax",n.target.value),type:"number",value:a.tax,error:o.tax}),e.jsx(_,{id:"description",label:"Deskripsi",onChange:n=>function(){},type:"text",value:a.description,error:o.description}),e.jsxs("div",{className:"mb-5 flex gap-5",children:[e.jsx(B,{idDate:"start_date",idTime:"start_time",label:"Waktu Mulai",errorDate:o.start_date,errorTime:o.start_time,onChangeDate:n=>s("start_date",n.target.value),onChangeTime:n=>s("start_time",n.target.value),valueDate:a.start_date,valueTime:a.start_time}),e.jsx(B,{idDate:"end_date",idTime:"end_time",label:"Waktu Akhir",errorDate:o.end_date,errorTime:o.end_time,onChangeDate:n=>s("end_date",n.target.value),onChangeTime:n=>s("end_time",n.target.value),valueDate:a.end_date,valueTime:a.end_time})]}),e.jsx(ge,{data:a,setData:s,errors:o}),e.jsx(pe,{})]}),e.jsxs("div",{className:"col-span-5",children:[e.jsx(ce,{errors:o,onChange:n=>l(n)}),e.jsx("div",{className:"flex justify-end mt-5",children:e.jsx(M,{color:"teal",name:"Tambah Event",type:"submit",processing:b})})]})]})})]})}export{we as default};
