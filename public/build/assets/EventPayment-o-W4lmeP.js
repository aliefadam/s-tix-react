import{j as e,W as d,r as c,q as N}from"./app-Bgn0t0R-.js";import{B as k}from"./BreadCrumb-x5KN-Bdz.js";import{E as D}from"./EventDetailPanel-PqP8SKMs.js";import{U as C}from"./UserLayout-BpOd_NUI.js";import{g as u}from"./getDistance-Dm5tcyCK.js";import{N as x}from"./notification-D8nuFN0y.js";import{s as P}from"./showConfirmation-2MnBgizT.js";import{t as E}from"./timeToSeconds-hLgWVabV.js";function S({name:s,img:t,setData:a}){return e.jsxs("div",{className:"flex items-center ps-4 border border-gray-200 rounded dark:border-gray-700",children:[e.jsx("input",{id:s,type:"radio",defaultValue:s,name:"pembayaran",onChange:o=>a("payment_method",o.target.value),className:"w-4 h-4 text-teal-600 bg-gray-100 border-gray-300 focus:ring-teal-500 dark:focus:ring-teal-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"}),e.jsxs("label",{htmlFor:s,className:"w-full py-4 ms-2 text-sm font-medium text-gray-900 dark:text-gray-300 flex items-center gap-2",children:[e.jsx("img",{src:t,className:"w-[50px] border p-2",alt:""}),s]})]})}function p({type:s,methods:t,setData:a}){return e.jsxs("div",{className:"border border-teal-700 text-white rounded-md shadow-md overflow-hidden",children:[e.jsx("div",{className:"p-5 bg-gradient-to-r from-teal-400 to-teal-500",children:e.jsx("span",{className:"text-center block",children:s})}),e.jsx("div",{className:"p-5 flex flex-col gap-4",children:e.jsx("div",{className:"grid grid-cols-2 gap-4",children:t.map((o,n)=>e.jsx(S,{name:o.name,img:o.image,setData:a},n))})})]})}function R({title:s,event:t,data_ticket:a,method_payment:o}){const n={before:[{url:route("home"),name:"Beranda"},{url:route("event",t.slug),name:t.name},{url:route("event.tickets",t.slug),name:"Pilih Tiket"},{url:route("event.data-diri",t.slug),name:"Data Diri"}],active:s},{data:I,setData:l,post:h,processing:f}=d({data_ticket:a,event_id:t.id,promo_code:"",promo_percent:"",promo_amount:"",payment_method:""}),g=i=>{i.preventDefault(),h(route("event.payment",t.slug))},[b,j]=c.useState(u({expiration_date:a.expiration_time})),y=()=>{const i=setInterval(()=>{const m=u({expiration_date:a.expiration_time});E(m)<0?(x({title:"Waktu pembelian telah habis",text:"Silahkan lakukan pembelian ulang",icon:"warning"}).then(w=>{w.isConfirmed&&(window.location.href=route("event.tickets",t.slug))}),clearInterval(i)):j(m)},1e3);return()=>clearInterval(i)},{notification:r}=N().props,v=d();return c.useEffect(()=>{y(),r&&(r.showConfirmation?P({title:r.title,text:r.text,icon:r.icon,onConfirm:()=>{v.put(route("ticket.clear-session-data-ticket",t.slug))}}):x({title:r.title,text:r.text,icon:r.icon}))},[a.expiration_time,r]),e.jsxs(C,{title:"Pilih Pembayaran",children:[e.jsx(k,{breadCrumbData:n}),e.jsx("form",{action:"",onSubmit:g,method:"POST",children:e.jsxs("div",{className:"mt-8 grid grid-cols-12 gap-8 min-h-[80vh]",children:[e.jsxs("div",{className:"col-span-8 h-fit flex flex-col gap-5",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 text-sm text-yellow-800 border border-yellow-300 rounded-lg bg-yellow-50 dark:bg-gray-800 dark:text-yellow-300 dark:border-yellow-800",role:"alert",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{className:"flex-shrink-0 inline w-4 h-4 me-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"})}),e.jsx("span",{className:"sr-only",children:"Info"}),e.jsx("div",{className:"",children:e.jsx("span",{className:"font-medium",children:"Batas Waktu Pengisian Data"})})]}),e.jsx("div",{className:"",children:e.jsx("span",{className:"poppins-semibold",children:b})})]}),e.jsx(p,{type:"Virtual Account",methods:o.virtual_account,setData:l}),e.jsx(p,{type:"E-Wallet & QRIS",methods:o.e_wallet,setData:l})]}),e.jsx("div",{className:"col-span-4 h-fit sticky top-[110px] bg-white border border-teal-700 shadow-md rounded-md",children:e.jsx(D,{ticketCount:a.pengunjung.length,event:t,subTotal:a.sub_total,tax:a.tax,taxAmount:a.tax_amount,total:a.total,processing:f})})]})})]})}export{R as default};
