import{j as e,W as w}from"./app-8YKExv4v.js";import{B as D}from"./BreadCrumb-CUBK9H8I.js";import{f as P,E as S}from"./EventDetailPanel-B8krGP3f.js";import{U as T}from"./UserLayout-COxdnNA7.js";import{g as f}from"./getDatePart-HgEJ48wy.js";function x({type:r,id:t,name:l,value:n,handleChange:o,title:a,userType:c,index:d=null,ticketID:i=null}){const s=m=>{c==="pembeli"?o(m,"data_pembeli"):o(m,"data_pengunjung",d,i)};return e.jsxs("div",{children:[e.jsx("label",{htmlFor:t,className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:a}),e.jsx("input",{type:r,id:t,name:l,value:n,onChange:m=>s(m),className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-teal-500 focus:border-teal-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-teal-500 dark:focus:border-teal-500"}),r==="email"&&t==="email"&&e.jsx("span",{className:"text-xs poppins-medium text-teal-700 mt-2 block",children:"Email ini digunakan untuk mengirim E-Ticket"})]})}function v({date:r,month:t,year:l,handleChange:n,userType:o,index:a=null,ticketID:c=null}){const d=i=>{o==="pembeli"?d(i):n(i,"data_pengunjung",a,c)};return e.jsxs("div",{children:[e.jsx("label",{htmlFor:"date",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Tanggal Lahir"}),e.jsxs("div",{className:"grid grid-cols-3 gap-5",children:[e.jsxs("select",{id:"date",name:"date",value:r,onChange:i=>d(i),className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-teal-500 focus:border-teal-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-teal-500 dark:focus:border-teal-500",children:[e.jsx("option",{value:"",children:"Tanggal"}),Array.from({length:31},(i,s)=>e.jsx("option",{value:String(s+1).padStart(2,"0"),children:String(s+1).padStart(2,"0")},s))]}),e.jsxs("select",{id:"month",name:"month",value:t,onChange:i=>d(i),className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-teal-500 focus:border-teal-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-teal-500 dark:focus:border-teal-500",children:[e.jsx("option",{value:"",children:"Bulan"}),Array.from({length:12},(i,s)=>e.jsx("option",{value:String(s+1).padStart(2,"0"),children:String(s+1).padStart(2,"0")},s))]}),e.jsxs("select",{id:"year",name:"year",value:l,onChange:i=>d(i),className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-teal-500 focus:border-teal-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-teal-500 dark:focus:border-teal-500",children:[e.jsx("option",{value:"",children:"Tahun"}),Array.from({length:100},(i,s)=>e.jsx("option",{value:String(2024-s),children:2024-s},s))]})]})]})}function N({gender:r,handleChange:t,index:l=null,ticketID:n=null,userType:o,name:a,idFemale:c,idMale:d}){const i=m=>{o==="pembeli"?t(m,"data_pembeli"):t(m,"data_pengunjung",l,n)},s=m=>r===m;return e.jsxs("div",{children:[e.jsx("label",{htmlFor:"gender",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Jenis Kelamin"}),e.jsxs("div",{className:"grid grid-cols-2 gap-5",children:[e.jsxs("div",{className:"flex items-center ps-4 border border-gray-200 rounded dark:border-gray-700",children:[e.jsx("input",{id:d,type:"radio",value:"Laki-laki",name:a,checked:s("Laki-laki"),onChange:m=>i(m),className:"w-4 h-4 text-teal-600 bg-gray-100 border-gray-300 focus:ring-teal-500 dark:focus:ring-teal-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"}),e.jsx("label",{htmlFor:d,className:"w-full py-4 ms-2 text-sm font-medium text-gray-900 dark:text-gray-300",children:"Laki-laki"})]}),e.jsxs("div",{className:"flex items-center ps-4 border border-gray-200 rounded dark:border-gray-700",children:[e.jsx("input",{id:c,type:"radio",value:"Perempuan",name:a,checked:s("Perempuan"),onChange:m=>i(m),className:"w-4 h-4 text-teal-600 bg-gray-100 border-gray-300 focus:ring-teal-500 dark:focus:ring-teal-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"}),e.jsx("label",{htmlFor:c,className:"w-full py-4 ms-2 text-sm font-medium text-gray-900 dark:text-gray-300",children:"Perempuan"})]})]})]})}function _({identity_type:r,identity_number:t,handleChange:l,userType:n,index:o=null,ticketID:a=null}){const c=d=>{n==="pembeli"?l(d,"data_pembeli"):l(d,"data_pengunjung",o,a)};return e.jsxs("div",{children:[e.jsx("label",{htmlFor:"identity-type",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Nomor Identitas"}),e.jsxs("div",{className:"flex",children:[e.jsxs("select",{id:"identity-type",name:"identity_type",value:r,onChange:d=>c(d),className:"poppins-medium bg-gray-100 rounded-s-lg border border-gray-300 text-gray-900 text-sm focus:ring-teal-500 focus:border-teal-500 block p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-teal-500 dark:focus:border-teal-500",children:[e.jsx("option",{value:"",children:"Pilih Identitas"}),e.jsx("option",{value:"KTP",children:"KTP"}),e.jsx("option",{value:"SIM",children:"SIM"}),e.jsx("option",{value:"PASSPORT",children:"Passport"})]}),e.jsx("input",{type:"number",id:"identity-number",name:"identity_number",value:t,onChange:d=>c(d),className:"bg-gray-50 rounded-e-lg border border-gray-300 text-gray-900 text-sm focus:ring-teal-500 focus:border-teal-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-teal-500 dark:focus:border-teal-500"})]})]})}function E({data_pembeli:r,handleChange:t}){return e.jsxs("div",{className:"border border-teal-700 text-white rounded-md shadow-md overflow-hidden",children:[e.jsx("div",{className:"p-5 bg-gradient-to-r from-teal-400 to-teal-500",children:e.jsx("span",{className:"text-center block",children:"Detail Pembeli"})}),e.jsxs("div",{className:"p-5 flex flex-col gap-4",children:[e.jsx(x,{id:"email",type:"email",name:"email",value:r.email,title:"Email",handleChange:t,userType:"pembeli"}),e.jsx(x,{id:"name",type:"text",name:"name",value:r.name,title:"Nama",handleChange:t,userType:"pembeli"}),e.jsx(v,{date:r.date,month:r.month,year:r.year,handleChange:t}),e.jsx(N,{gender:r.gender,handleChange:t,name:"gender",userType:"pembeli",idFemale:"gender-female",idMale:"gender-male"}),e.jsx(_,{identity_type:r.identity_type,identity_number:r.identity_number,handleChange:t,userType:"pembeli"})]})]})}function I({ticket:r}){return e.jsxs("div",{className:"bg-gray-50 p-4 border border-teal-700 flex justify-between items-center rounded-md shadow-md",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("h1",{className:"text-gray-500 text-sm poppins-medium",children:"Kategori Tiket"}),e.jsx("span",{className:"text-black poppins-medium mt-[3px]",children:r.name})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("h1",{className:"text-gray-500 text-sm poppins-medium text-right",children:"Harga"}),e.jsx("span",{className:"text-black poppins-medium mt-[3px]",children:P(r.price)})]})]})}function $({index:r,ticketID:t,samakanDataPembeli:l}){return e.jsx("span",{className:"text-center block",children:e.jsxs("label",{className:"inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",value:"",className:"sr-only peer samakan-data-pembeli",name:`samakan-data-pembeli[${r}]`,onChange:n=>l(n,r,t)}),e.jsx("div",{className:"shadow-md relative w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-teal-300 dark:peer-focus:ring-teal-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:w-5 after:h-5 after:transition-all dark:border-gray-600 peer-checked:bg-teal-600"}),e.jsx("span",{className:"ms-3 text-sm font-medium text-white dark:text-gray-300",children:"Samakan dengan data pembeli"})]})})}function F({tickets:r,samakanDataPembeli:t,data_pengunjung:l,handleChange:n}){return e.jsx(e.Fragment,{children:r.map((o,a)=>{var c,d,i,s,m,y,g,u;return e.jsxs("div",{className:"border border-teal-700 text-white rounded-md shadow-md overflow-hidden pengunjung",children:[e.jsxs("div",{className:"p-5 flex justify-between items-center bg-gradient-to-r from-teal-400 to-teal-500",children:[e.jsxs("span",{className:"text-center block",children:["Detail Pengunjung ",a+1]}),e.jsx($,{index:a,ticketID:o.id,samakanDataPembeli:t})]}),e.jsxs("div",{className:"p-5 flex flex-col gap-4",children:[e.jsx(I,{ticket:o}),e.jsx(x,{id:`email-pengunjung-${a}`,type:"email",name:"email",title:"Email",handleChange:n,value:(c=l[a])==null?void 0:c.email,userType:"pengunjung",index:a,ticketID:o.id}),e.jsx(x,{id:`name-pengunjung-${a}`,type:"text",name:"name",title:"Nama",handleChange:n,value:(d=l[a])==null?void 0:d.name,index:a,ticketID:o.id}),e.jsx(v,{date:(i=l[a])==null?void 0:i.date,month:(s=l[a])==null?void 0:s.month,year:(m=l[a])==null?void 0:m.year,handleChange:n,index:a,ticketID:o.id}),e.jsx(N,{gender:(y=l[a])==null?void 0:y[`gender-${a}`],handleChange:n,userType:"pengunjung",index:a,ticketID:o.id,data_pengunjung:l,name:`gender-${a}`,idMale:`gender-male-${a}`,idFemale:`gender-female-${a}`}),e.jsx(_,{identity_type:(g=l[a])==null?void 0:g.identity_type,identity_number:(u=l[a])==null?void 0:u.identity_number,handleChange:n,userType:"pengunjung",index:a,ticketID:o.id})]})]},a)})})}function M({title:r,profile:t,event:l,data_ticket:n}){const o={before:[{url:route("home"),name:"Beranda"},{url:route("event",l.slug),name:l.name},{url:route("event.tickets",l.slug),name:"Pilih Tiket"}],active:r},{data:a,setData:c,post:d,processing:i}=w({data_pengunjung:[],data_pembeli:{email:t.email,name:t.name,date:f(t.date_of_birth,"day"),month:f(t.date_of_birth,"month"),year:f(t.date_of_birth,"year"),gender:t.gender,identity_type:t.identity_type,identity_number:t.identity_number},sub_total:n.sub_total,tax:n.tax,tax_amount:n.tax_amount,total:n.total}),s=(g,u,b=null,p=null)=>{const k=g.target.name,j=g.target.value;if(u=="data_pembeli")c("data_pembeli",{...a.data_pembeli,[k]:j});else{const h=[...a.data_pengunjung];h[b]={...h[b],[`ticket_id-${b}`]:p,[k]:j},c("data_pengunjung",h)}},m=(g,u,b)=>{const p=[...a.data_pengunjung];g.target.checked?p[u]={...p[u],[`ticket_id-${u}`]:b,email:a.data_pembeli.email,name:a.data_pembeli.name,date:a.data_pembeli.date,month:a.data_pembeli.month,year:a.data_pembeli.year,[`gender-${u}`]:a.data_pembeli.gender,identity_type:a.data_pembeli.identity_type,identity_number:a.data_pembeli.identity_number}:p[u]={...p[u],[`ticket_id-${u}`]:null,email:"",name:"",date:"",month:"",year:"",[`gender-${u}`]:"",identity_type:"",identity_number:""},c("data_pengunjung",p)},y=async g=>{g.preventDefault(),d(route("event.pembayaran",l.slug))};return e.jsxs(T,{title:"Detail Event",children:[e.jsx(D,{breadCrumbData:o}),e.jsx("form",{action:"",onSubmit:y,children:e.jsxs("div",{className:"mt-8 grid grid-cols-12 gap-8 min-h-[80vh]",children:[e.jsxs("div",{className:"col-span-8 h-fit flex flex-col gap-5 border",children:[e.jsx(E,{data_pembeli:a.data_pembeli,handleChange:s}),e.jsx(F,{data_pengunjung:a.data_pengunjung,handleChange:s,tickets:n.tickets,samakanDataPembeli:m})]}),e.jsx("div",{className:"col-span-4 h-fit sticky top-[110px] bg-white border border-teal-700 shadow-md rounded-md",children:e.jsx(S,{processing:i,event:l,subTotal:n.sub_total,ticketCount:n.tickets.length,tax:n.tax,taxAmount:n.tax_amount,total:n.total})})]})})]})}export{M as default};
