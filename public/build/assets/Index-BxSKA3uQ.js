import{j as e,a as j,r as u,q as y,W as f}from"./app-Ccieh3i-.js";import{B as N}from"./BreadCrumb-BYsu20cW.js";import{i as b}from"./initDataTable-DuWwybSn.js";import{A as k}from"./AdminLayout-DomYgNIM.js";import{S as g,N as v}from"./notification-D8nuFN0y.js";import{s as m}from"./showConfirmation-2MnBgizT.js";function w(){return e.jsx("thead",{className:"text-xs text-teal-700 uppercase border-b border-t dark:text-teal-400",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-5",children:"No"}),e.jsx("th",{scope:"col",className:"px-6 py-5",children:"Kode Voucher"}),e.jsx("th",{scope:"col",className:"px-6 py-5",children:"Unit"}),e.jsx("th",{scope:"col",className:"px-6 py-5",children:"Nominal"}),e.jsx("th",{scope:"col",className:"px-6 py-5",children:"Minimal Pembelian"}),e.jsx("th",{scope:"col",className:"px-6 py-5",children:"Maksimal Pemakaian"}),e.jsx("th",{scope:"col",className:"px-6 py-5",children:"Jumlah Pemakaian"}),e.jsx("th",{scope:"col",className:"px-6 py-5",children:"Status"}),e.jsx("th",{scope:"col",className:"px-6 py-5",children:"Aksi"})]})})}function h({route:r,title:l,onClick:d}){return e.jsx(j,{onClick:d,href:r,className:"block px-4 py-3 hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white",children:l})}function V({vouchers:r,handleDelete:l,handleActiveVoucher:d,handleDeactiveVoucher:o,handleSelectUsageVoucher:i=()=>{}}){return e.jsx("tbody",{children:r.map((a,t)=>e.jsxs("tr",{className:"bg-white border-b dark:bg-gray-800 dark:border-gray-700",children:[e.jsx("td",{className:"px-6 py-5",children:t+1}),e.jsx("td",{className:"px-6 py-5",children:a.code}),e.jsx("td",{className:"px-6 py-5 capitalize",children:a.unit}),e.jsx("td",{className:"px-6 py-5",children:a.nominal}),e.jsx("td",{className:"px-6 py-5",children:a.minimal_transaction}),e.jsx("td",{className:"px-6 py-5",children:a.maximal_used}),e.jsxs("td",{className:"px-6 py-5",children:[e.jsxs("span",{className:"poppins-semibold",children:[a.used,"x"]}),a.used!=0&&e.jsx("button",{onClick:()=>i(a.id),"data-modal-target":"detail-usage-voucher","data-modal-toggle":"detail-usage-voucher",className:"ml-3 text-sm text-blue-700 underline hover:text-blue-900 active:scale-95 duration-200",children:"Lihat Detail"})]}),e.jsx("td",{className:"px-6 py-5",children:a.active?e.jsx("span",{className:"bg-green-100 text-green-800 text-xs font-medium px-2.5 py-0.5 rounded dark:bg-green-900 dark:text-green-300",children:"Aktif"}):e.jsx("span",{className:"bg-red-100 text-red-800 text-xs font-medium px-2.5 py-0.5 rounded dark:bg-red-900 dark:text-red-300",children:"Nonaktif"})}),e.jsxs("td",{className:"px-6 py-5",children:[e.jsx("button",{id:`dropdownDefaultButton-${t}`,className:"w-[30px] py-2 px-3 focus:ring-4 focus:outline-none focus:ring-gray-200 rounded-md","data-dropdown-toggle":`dropdown-${t}`,children:e.jsx("i",{className:"fa-solid fa-ellipsis-vertical"})}),e.jsx("div",{id:`dropdown-${t}`,className:"z-10 hidden bg-white divide-y divide-gray-100 rounded-lg shadow w-32 dark:bg-gray-700",children:e.jsxs("ul",{className:"py-2 text-sm text-gray-700 dark:text-gray-200","aria-labelledby":`dropdownDefaultButton-${t}`,children:[e.jsx("li",{children:e.jsx(h,{route:route("admin.voucher.edit",a.id),title:"Edit"})}),e.jsx("li",{children:e.jsx(h,{route:"#",title:"Hapus",onClick:s=>l(s,a.id)})}),e.jsx("li",{children:a.active?e.jsx(h,{onClick:s=>o(s,a.id),route:"#",title:"Nonaktifkan"}):e.jsx(h,{onClick:s=>d(s,a.id),route:"#",title:"Aktifkan"})})]})})]})]},t))})}function D({vouchers:r,usage_voucher:l,handleDeleteVoucher:d,handleActiveVoucher:o,handleDeactiveVoucher:i}){const[a,t]=u.useState({}),s=x=>{console.log(x),t(l.find(n=>n.voucher_id==x))};return u.useEffect(()=>{b()},[]),e.jsxs("div",{className:"relative",children:[e.jsxs("table",{className:"w-full text-sm text-left rtl:text-right text-gray-500 dark:text-gray-400",id:"dataTable",children:[e.jsx(w,{}),e.jsx(V,{handleSelectUsageVoucher:s,handleActiveVoucher:o,handleDeactiveVoucher:i,vouchers:r,handleDelete:d})]}),l.length>0&&e.jsx("div",{id:"detail-usage-voucher",tabIndex:-1,"aria-hidden":"true",className:"hidden overflow-y-auto overflow-x-hidden fixed top-0 right-0 left-0 z-50 justify-center items-center w-full md:inset-0 h-[calc(100%-1rem)] max-h-full",children:e.jsx("div",{className:"relative p-4 w-[60%] max-h-full",children:e.jsxs("div",{className:"relative bg-white rounded-lg shadow dark:bg-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 md:p-5 border-b rounded-t dark:border-gray-600",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Penggunaan Voucher"}),e.jsxs("button",{type:"button",className:"text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white","data-modal-hide":"detail-usage-voucher",children:[e.jsx("svg",{className:"w-3 h-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14",children:e.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"})}),e.jsx("span",{className:"sr-only",children:"Close modal"})]})]}),e.jsx("div",{className:"p-4 md:p-5 h-[500px] overflow-y-auto scrollbar",children:e.jsx("div",{className:"relative overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm text-left rtl:text-right text-gray-500 dark:text-gray-400",children:[e.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3",children:"No"}),e.jsx("th",{scope:"col",className:"px-6 py-3",children:"Nama Pengguna"}),e.jsx("th",{scope:"col",className:"px-6 py-3",children:"Email Pengguna"}),e.jsx("th",{scope:"col",className:"px-6 py-3",children:"Event"}),e.jsx("th",{scope:"col",className:"px-6 py-3",children:"Digunakan Pada"})]})}),e.jsx("tbody",{children:e.jsxs("tr",{className:"bg-white border-b dark:bg-gray-800 dark:border-gray-700",children:[e.jsx("td",{className:"px-6 py-4",children:"Silver"}),e.jsx("td",{className:"px-6 py-4",children:"Nama Pengguna"}),e.jsx("td",{className:"px-6 py-4",children:"Email Pengguna"}),e.jsx("td",{className:"px-6 py-4",children:"Digunakan Pada Event"})]})})]})})})]})})})]})}function C(){return e.jsxs("div",{className:"bg-teal-700 rounded-t-md py-4 px-5 flex items-center justify-between",children:[e.jsx("h1",{className:"text-lg poppins-medium text-white",children:"Data Voucher"}),e.jsxs(j,{href:route("admin.voucher.create"),className:"bg-white text-teal-700 hover:bg-gray-100 focus:outline-none focus:ring-4 focus:ring-gray-200 font-medium rounded-md text-sm px-5 py-2.5 text-center",children:[e.jsx("i",{className:"fa-solid fa-plus mr-1.5"}),"Tambah Voucher"]})]})}const p=()=>{g.fire({title:"Loading",allowOutsideClick:!1,didOpen:()=>{g.showLoading()}})};function B({title:r,vouchers:l,usage_voucher:d}){const o={active:r},{notification:i}=y().props;u.useEffect(()=>{i&&v(i)},[i]);const a=f(),t=(n,c)=>{n.preventDefault(),m({title:"Hapus Voucher",text:"Apakah anda yakin menghapus voucher ini ?",onConfirm:()=>{a.delete(route("admin.voucher.delete",c),{onStart:()=>{p()}})}})},s=(n,c)=>{n.preventDefault(),m({title:"Hapus Voucher",text:"Apakah anda yakin menonaktifkan voucher ini ?",onConfirm:()=>{a.put(route("admin.voucher.deactivate",c),{onStart:()=>{p()}})}})},x=(n,c)=>{n.preventDefault(),m({title:"Hapus Voucher",text:"Apakah anda yakin mengaktifkan voucher ini ?",onConfirm:()=>{a.put(route("admin.voucher.activate",c),{onStart:()=>{p()}})}})};return e.jsxs(k,{title:r,children:[e.jsx(N,{breadCrumbData:o}),e.jsxs("div",{className:"mt-5 bg-white shadow-md rounded-md overflow-hiddens",children:[e.jsx(C,{}),e.jsx(D,{vouchers:l,usage_voucher:d,handleDeleteVoucher:t,handleActiveVoucher:x,handleDeactiveVoucher:s})]})]})}export{B as default};
